<div ui-view>
  <div class="column-header">

    <!-- TODO: Implement Sort By feature - commenting out for now -->
<!--
  <div class="btn-group pull-right">
    <label>Sort by</label>
    <a href="#" class="dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="false">
      Newest first
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
      <li role="presentation" class="active"><a role="menuitem" tabindex="-1" href="#">Newest first</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Oldest first</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Best match</a></li>
    </ul>
  </div>
-->

    <h4>
      <!-- <a href="#" class="header-icon visible-xs-inline-block" title="Open filter panel"><i class="fa fa-filter"></i></a> -->
      <strong>{{indexVM.results.hits.total}}</strong> results
    </h4>

  </div>


  <ul id="results" class="list-group">

    <li class="list-group-item" ng-repeat="doc in indexVM.results.hits.hits track by $index">
      <a href="#collapse{{$index}}" class="list-group-item-heading collapsed" data-toggle="collapse" data-parent="#results" target="_self">
        <div class="row">
          <div class="col-xs-3 col-sm-2 col-lg-1">
            <span ng-if="doc._source.hasImagePart">
            <img blurred-image ng-src="{{getDisplayImageSrc(doc)}}" class="image-thumb center-block">
            </span>
          </div>
          <div class="col-xs-9 col-sm-10 col-lg-11">
            {{$eval(euiConfigs.listFields["title"][0].field)}}
            <div class="list-group-item-meta">
              <span ng-repeat="field in euiConfigs.listFields['short']">
                <strong><span class="to-lowercase" ng-bind="field.title + ':'"></span></strong>
                <span class="{{field.classes}}">{{$eval(field.field) || "N/A"}}</span>
              </span>
            </div>
          </div>
        </div>
      </a>
      <div id="collapse{{$index}}" class="list-group-item-text collapse">
        <div class="row">
          <!-- ngIf: doc._source.hasImagePart -->
          <div class="col-md-5 col-lg-4 text-center">
            <span ng-if="doc._source.hasImagePart">
              <div class="image-with-caption">
                <img blurred-image class="image-expanded center-block" ng-src="{{getDisplayImageSrc(doc)}}">
                <div class="caption image-search-caption" ng-click="imageSearch(getDisplayImageSrc(doc))">
                  <div class="caption-background"></div>
                  <div class="caption-text"><i class="fa fa-search"></i> Find similar</div>
                </div>
              </div>
            </span>
          </div>

          <div class="col-md-7 col-lg-8">

            <h4>URL</h4>
            <a href="{{doc._source.url}}" target="_blank">{{doc._source.url || "N/A"}}</a>

            <div class="row">
              <div class="col-sm-6" ng-repeat="section in euiConfigs.listFields['full']">
                <dl class="{{section.classes}}">
                   <dt ng-repeat-start="field in section.fields">{{field.title}}</dt>
                   <dd ng-if="$eval(field.field)">{{$eval(field.field)}}</dd>
                   <dd ng-if="$eval(field.featureArray + '.length')" 
                     ng-repeat="item in $eval(field.featureArray)">{{$eval('item.' + field.featureValue)}}</dd>
                   <span ng-repeat-end></span>
                </dl>
              </div>
            </div>

  <!--           <button type="button" class="btn btn-primary"  target="_self">View Details</button> -->
            <button type="button" class="btn btn-primary" ng-click="viewDetails(doc)" target="_self">View Details</button>
          </div>
        </div>
      </div>
    </li>
  </ul>

  <div class="text-center">
    <ul class="list-unstyled">
    <li><pagination total-items="indexVM.results.hits.total" ng-show="indexVM.results.hits.total > 10"
    ng-model="indexVM.page" max-size="10" items-per-page="indexVM.pageSize"
    class="pagination-sm" num-pages="indexVM.pageCount"></pagination></li>
    <li ng-show="indexVM.results.hits.total > 0">Displaying page {{indexVM.page}} of {{indexVM.pageCount}}</li>
    </ul>
  </div>
</div>